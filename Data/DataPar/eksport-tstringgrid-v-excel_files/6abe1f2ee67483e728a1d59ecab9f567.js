editor.path="/modules/bueditor/";editor.buttons=[ [ "Жирный", "[b]%TEXT%[/b]", "bold.gif", "B" ], [ "Наклонный", "[i]%TEXT%[/i]", "italic.gif", "I" ], [ "Подчеркивание", "[u]%TEXT%[/u]", "underline.gif", "" ], [ "Вставить ссылку", "js:\nvar S = E.getSelection();\nvar M = S.match(new RegExp(\'^\\\\[url(?:=([^\\\\]]*))?]((?:.|[\\r\\n])*)\\\\[/url]$\')) || [\'\', \'\', \'\'];\nvar form = [\n {name: \'href\', title: \'URL\', value: M[1] ? M[1] : M[2]},\n {name: \'text\', value: M[1] ? M[2] : (M[0] ? \'\' : S)}\n];\neDefTagDialog(\'a\', form, \'Вставить ссылку\', \'OK\', \'bbcUrlProcess\');\n\nbbcUrlProcess = function(tag, form) {\n  var url = form.elements[\'attr_href\'].value;\n  var text = form.elements[\'attr_text\'].value;\n  var str = \'[url\'+ (text ? (\'=\'+ url) : \'\') +\']\'+ (text ? text : url) +\'[/url]\';\n  editor.dialog.close();\n  if (url) editor.active.replaceSelection(str);\n}", "link.png", "L" ], [ "Вставить изображение", "js:\nvar M = E.getSelection().match(new RegExp(\'^\\\\[img(?:=(\\\\d+)x(\\\\d+))?](.+)\\\\[/img]$\')) || [\'\', \'\', \'\', \'\'];\nvar form = [\n {name: \'src\', title: \'URL\', value: M[3]},\n {name: \'width\', value: M[1]},\n {name: \'height\', value: M[2]}\n];\neDefTagDialog(\'img\', form, \'Вставить изображение\', \'OK\', \'bbcImgProcess\');\n\nbbcImgProcess = function(tag, form) {\n  var src = form.elements[\'attr_src\'].value;\n  var width = form.elements[\'attr_width\'].value;\n  var height = form.elements[\'attr_height\'].value;\n  var str = \'[img\'+ (width ? (\'=\'+ width +\'x\'+ height) : \'\') +\']\'+ src +\'[/img]\';\n  editor.dialog.close();\n  if (src) editor.active.replaceSelection(str);\n}", "image.png", "M" ], [ "Цвет", "js: \n getColor=function(txt) {\n  editor.active.tagSelection(\'[color=\' + txt+ \']\',\'[/color]\',\'end\');\n  editor.dialog.close();\n}\nvar colors = new Array(	\"#000000\",\"#993300\",\"#333300\",\"#003300\",\"#003366\",\"#000080\",\"#333399\",\"#333333\",\"#800000\",\"#FF6600\",\"#808000\",\"#008000\",\"#008080\",\"#0000FF\",\"#666699\",\"#808080\",\"#FF0000\",\"#FF9900\",\"#99CC00\",\"#339966\",\"#33CCCC\",\"#3366FF\",\"#800080\",\"#999999\",\"#FF00FF\",\"#FFCC00\",\"#FFFF00\",\"#00FF00\",\"#00FFFF\",\"#00CCFF\",\"#993366\",\"#C0C0C0\",\"#FF99CC\",\"#FFCC99\",\"#FFFF99\",\"#CCFFCC\",\"#CCFFFF\",\"#99CCFF\",\"#CC99FF\",\"#FFFFFF\"\n);\n\nvar colorForm= \'\x3ctable border=\"0\" cellspacing=\"1\" cellpadding=\"0\" class=\"color\"\x3e\x3ctr\x3e\';\nfor (i=0; i\x3ccolors.length; i++) {\n	colorForm+= \'\x3ctd bgcolor=\"\' + colors[i] + \'\"\x3e\'\n		+ \'\x3ca href=\"javascript: getColor(\\\'\' + colors[i] +  \'\\\');\"\x3e\'\n		+ \'\x3cimg border=\"0\" src=\"/sites/all/modules/bueditor/icons/spacer.gif\" width=\"10\" height=\"10\" title=\"\' + colors[i] +  \'\" alt=\"\' + colors[i] +  \'\" /\x3e\x3c/a\x3e\x3c/td\x3e\';\n	if ((i+1) % 8 == 0)\n		colorForm+= \'\x3c/tr\x3e\x3ctr\x3e\';\n}\ncolorForm+= \'\x3c/tr\x3e\x3c/table\x3e\';\neditor.dialog.open(\'Цвет\', colorForm);", "forecolor.gif", "" ], [ "Цитата", "js: \n txt=\'\'\n if (window.getSelection\x26\x26!window.opera) txt = window.getSelection() \n else if (document.getSelection) txt=document.getSelection()\n else if (document.selection) txt=document.selection.createRange().text\nif (txt != \'\') {\n txt=\'[quote]\'+txt+\'[/quote]\'\n editor.active.replaceSelection(txt)\n} else {\n editor.active.tagSelection(\'[quote]\', \'[/quote]\')\n}", "«Ц»", "" ], [ "Нумерованный список. Делает выделенные строки нумерованным списком.", "js: eDefSelProcessLines(\'[list=1]\\n\', \'\',\' [*]\\n\', \'[/list]\');", "numlist.gif", "O" ], [ "Простой список. Делает выделенные строки простым списком.", "js: eDefSelProcessLines(\'[list]\\n\',\'\',\' [*]\\n\', \'[/list]\');", "bullist.gif", "U" ], [ "Вставка кода", "[code]%TEXT%[/code]", "«Код»", "" ], [ "Разделение страницы", "\x3c!--newpage--\x3e", "teaserbr.png", "T" ], [ "Предпросмотр", "js:\nfunction BBC2HTML(S) {\nif (S.indexOf(\'[\') \x3c 0) return S;\n\nfunction X(p, f) {return new RegExp(p, f)}\nfunction D(s) {return rD.exec(s)}\nfunction R(s) {return s.replace(rB, P)}\nfunction A(s, p) {for (var i in p) s = s.replace(X(i, \'g\'), p[i]); return s;}\n\nfunction P($0, $1, $2, $3) {\n  if ($3 \x26\x26 $3.indexOf(\'[\') \x3e -1) $3 = R($3);\n  switch ($1) {\n    case \'url\':case \'anchor\':case \'email\': return \'\x3ca \'+ L[$1] + ($2||$3) +\'\"\x3e\'+ $3 +\'\x3c/a\x3e\';\n    case \'img\': var d = D($2); return \'\x3cimg src=\"\'+ $3 +\'\"\'+ (d ? \' width=\"\'+ d[1] +\'\" height=\"\'+ d[2] +\'\"\' : \'\') +\' alt=\"\'+ (d ? \'\' : $2) +\'\" /\x3e\';\n    case \'flash\':case \'youtube\': var d = D($2)||[0, 425, 366]; return \'\x3cobject type=\"application/x-shockwave-flash\" data=\"\'+ Y[$1] + $3 +\'\" width=\"\'+ d[1] +\'\" height=\"\'+ d[2] +\'\"\x3e\x3cparam name=\"movie\" value=\"\'+ Y[$1] + $3 +\'\" /\x3e\x3c/object\x3e\';\n    case \'float\': return \'\x3cspan style=\"float: \'+ $2 +\'\"\x3e\'+ $3 +\'\x3c/span\x3e\';\n    case \'left\':case \'right\':case \'center\':case \'justify\': return \'\x3cdiv style=\"text-align: \'+ $1 +\'\"\x3e\'+ $3 +\'\x3c/div\x3e\';\n    case \'google\':case \'wikipedia\': return \'\x3ca href=\"\'+ G[$1] + $3 +\'\"\x3e\'+ $3 +\'\x3c/a\x3e\';\n    case \'b\':case \'i\':case \'u\':case \'s\':case \'sup\':case \'sub\':case \'h1\':case \'h2\':case \'h3\':case \'h4\':case \'h5\':case \'h6\':case \'table\':case \'tr\':case \'th\':case \'td\': return \'\x3c\'+ $1 +\'\x3e\'+ $3 +\'\x3c/\'+ $1 +\'\x3e\';\n    case \'row\': case \'r\':case \'header\':case \'head\':case \'h\':case \'col\':case \'c\': return \'\x3c\'+ T[$1] +\'\x3e\'+ $3 +\'\x3c/\'+ T[$1] +\'\x3e\';\n    case \'acronym\':case \'abbr\': return \'\x3c\'+ $1 +\' title=\"\'+ $2 +\'\"\x3e\'+ $3 +\'\x3c/\'+ $1 +\'\x3e\';\n  }\n  return \'[\'+ $1 + ($2 ? \'=\'+ $2 : \'\') +\']\'+ $3 +\'[/\'+ $1 +\']\';\n}\n\nvar rB = X(\'\\\\[([a-z][a-z0-9]*)(?:=([^\\\\]]+))?]((?:.|[\\r\\n])*?)\\\\[/\\\\1]\', \'g\'), rD = X(\'^(\\\\d+)x(\\\\d+)$\');\nvar L = {url: \'href=\"\', \'anchor\': \'name=\"\', email: \'href=\"mailto: \'};\nvar G = {google: \'http://www.google.com/search?q=\', wikipedia: \'http://www.wikipedia.org/wiki/\'};\nvar Y = {youtube: \'http://www.youtube.com/v/\', flash: \'\'};\nvar T = {row: \'tr\', r: \'tr\', header: \'th\', head: \'th\', h: \'th\', col: \'td\', c: \'td\'};\nvar C = {notag: [{\'\\\\[\': \'\x26#91;\', \']\': \'\x26#93;\'}, \'\', \'\'], code: [{\'\x3c\': \'\x26lt;\'}, \'\x3ccode\x3e\x3cpre\x3e\', \'\x3c/pre\x3e\x3c/code\x3e\']};\nC.php = [C.code[0], C.code[1]+ \'\x26lt;?php \', \'?\x3e\'+ C.code[2]];\nvar F = {font: \'font-family:$1\', size: \'font-size:$1px\', color: \'color:$1\'};\nvar U = {c: \'circle\', d: \'disc\', s: \'square\', \'1\': \'decimal\', a: \'lower-alpha\', A: \'upper-alpha\', i: \'lower-roman\', I: \'upper-roman\'};\nvar I = {}, B = {};\n\nfor (var i in C) I[\'\\\\[(\'+ i +\')]((?:.|[\\r\\n])*?)\\\\[/\\\\1]\'] = function($0, $1, $2) {return C[$1][1] + A($2, C[$1][0]) + C[$1][2]};\nfor (var i in F) {B[\'\\\\[\'+ i +\'=([^\\\\]]+)]\'] = \'\x3cspan style=\"\'+ F[i] +\'\"\x3e\'; B[\'\\\\[/\'+ i +\']\'] = \'\x3c/span\x3e\';}\nB[\'\\\\[list]\'] = \'\x3cul\x3e\'; B[\'\\\\[list=(\\\\w)]\'] = function($0, $1) {return \'\x3cul style=\"list-style-type: \'+ (U[$1]||\'disc\') +\'\"\x3e\'}; B[\'\\\\[/list]\'] = \'\x3c/ul\x3e\'; B[\'\\\\[\\\\*]\'] = \'\x3cli\x3e\';\nB[\'\\\\[quote(?:=([^\\\\]]+))?]\'] = function($0, $1) {return \'\x3cdiv class=\"bb-quote\"\x3e\'+ ($1 ? $1 +\' wrote\' : \'Quote\') +\':\x3cblockquote\x3e\'}; B[\'\\\\[/quote]\'] = \'\x3c/blockquote\x3e\x3c/div\x3e\';\nB[\'\\\\[(hr|br)]\'] = \'\x3c$1 /\x3e\'; B[\'\\\\[sp]\'] = \'\x26nbsp;\';\nreturn R(A(A(S, I), B));\n}\nE.preview \x26\x26 $(E.preview).css(\'display\') != \'none\' ? E.setContent(E.oriCnt) : E.setContent(BBC2HTML(E.oriCnt = E.getContent()));\neDefPreview();", "eye_20_20.png", "" ] ]